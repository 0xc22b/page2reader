(function(){window.page2reader=function(){var e,f,n=document.characterSet||document.charset,p=document.location.href,h=function(a,b,c){if(b.addEventListener)b.addEventListener(a,c,!1);else if(b.attachEvent)b.attachEvent("on"+a,c);else return!1;return!0},k=function(a,b,c){return b.removeEventListener?(b.removeEventListener(a,c,!1),!0):b.detachEvent?b.detachEvent("on"+a,c):!1},q=function(a){var b;try{b=document.createElement('<iframe name="'+a+'">')}catch(c){b=document.createElement("iframe")}b.setAttribute("id",
a);b.setAttribute("name",a);b.setAttribute("allowTransparency","true");b.style.cssText="display: none;";return b},r=function(a,b,c){var d=document.createElement("form");d.setAttribute("id",a);d.setAttribute("action",b);d.setAttribute("accept-charset",c);d.setAttribute("enctype","application/x-www-form-urlencoded");d.setAttribute("method","post");return d},l=function(a){var b=document.getElementById("page2reader-msg");b||(b=document.createElement("div"),b.setAttribute("id","page2reader-msg"),b.style.cssText=
"display: block;height: 54px;left: 50%;margin-left: -129px;padding: 22px 0 0;position: fixed;top: 10%;width: 258px;z-index: 100000;background-color: #7d7d7d;-moz-border-radius: 5px;-webkit-border-radius: 5px;border-radius: 5px;filter: alpha(opacity=97);-moz-opacity: .97;opacity: .97;text-align: center;color: white;font-size: 23px;font-family: Helvetica, Arial, sans-serif",document.body.appendChild(b));b.innerHTML=a},g=function(){var a=document.getElementById("page2reader-msg");a&&a.parentNode.removeChild(a)},
m=function(a){a.data&&a.data.substring&&"page2reader:"===a.data.substring(0,12)&&(a=a.data.substring(12),l(a),window.setTimeout(function(){g()},1E3),k("message",window,m),k("unload",window,g),(a=document.getElementById(e))&&a.parentNode.removeChild(a),(a=document.getElementById(f))&&a.parentNode.removeChild(a))};return{send:function(){l("Sending...");e="page2readerFrameName"+(new Date).getTime();f="page2readerFormName"+(new Date).getTime();h("message",window,m);h("unload",window,g);var a=q(e);document.body.appendChild(a);
var b=r(f,"http://page2reader.appspot.com/submit",n);b.setAttribute("target",a.getAttribute("name"));document.body.appendChild(b);var a={method:"submitPageUrl",content:p},c;for(c in a)if(a.hasOwnProperty(c)){var d=document.createElement("input");d.setAttribute("type","hidden");d.setAttribute("name",c);d.setAttribute("value",a[c]);b.appendChild(d)}window.setTimeout(function(){b.submit()},50)}}}();window.page2reader.send()})();
